# ðŸƒ Self-Hosted Runner Registration Guide

**Repository**: InfinityXOneSystems/construct-iq-360
**Authority**: Overseer-Prime â€” TAP Protocol v2
**Purpose**: Register a self-hosted runner to give the Infinity system access to local or remote machines.

---

## Why a Self-Hosted Runner?

GitHub-hosted runners (`ubuntu-latest`) are ephemeral and have no access to your local network,
private APIs, or persistent storage. A self-hosted runner enables:

- Access to local permit databases and internal APIs
- Persistent storage for large datasets
- Faster execution (no cold start)
- Access to GPUs for AI inference
- Integration with on-premise systems

---

## Option A â€” Local Machine Runner (Developer Workstation)

```bash
# 1. Create runner directory
mkdir -p ~/actions-runner/construct-iq-360 && cd ~/actions-runner/construct-iq-360

# 2. Download the latest runner (Linux x64)
curl -o actions-runner-linux-x64.tar.gz -L \
  https://github.com/actions/runner/releases/download/v2.321.0/actions-runner-linux-x64-2.321.0.tar.gz
tar xzf ./actions-runner-linux-x64.tar.gz

# 3. Register the runner with the org
# Get your runner token from:
#   https://github.com/organizations/InfinityXOneSystems/settings/actions/runners/new
./config.sh \
  --url https://github.com/InfinityXOneSystems \
  --token YOUR_RUNNER_REG_TOKEN \
  --name "local-machine" \
  --labels "self-hosted,local-machine,x64,linux" \
  --work _work \
  --unattended

# 4. Install and start as a service (Linux)
sudo ./svc.sh install
sudo ./svc.sh start

# Verify it is running
sudo ./svc.sh status
```

---

## Option B â€” Remote VPS / Cloud VM Runner

```bash
# Same steps as Option A, but run on the remote server.
# Use a different --name and --labels:
./config.sh \
  --url https://github.com/InfinityXOneSystems \
  --token YOUR_RUNNER_REG_TOKEN \
  --name "remote-vps" \
  --labels "self-hosted,remote-vps,x64,linux" \
  --work _work \
  --unattended
```

---

## Option C â€” Docker Container Runner (Recommended for CI/CD Isolation)

```dockerfile
# Dockerfile.runner
FROM ubuntu:22.04
RUN apt-get update && apt-get install -y curl git nodejs python3 python3-pip
RUN useradd -m runner
WORKDIR /home/runner/actions-runner
RUN curl -o runner.tar.gz -L \
      https://github.com/actions/runner/releases/download/v2.321.0/actions-runner-linux-x64-2.321.0.tar.gz \
    && tar xzf runner.tar.gz && rm runner.tar.gz
USER runner
COPY entrypoint.sh /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]
```

```bash
# entrypoint.sh
#!/bin/bash
./config.sh --url https://github.com/InfinityXOneSystems \
  --token "$RUNNER_TOKEN" --name "$RUNNER_NAME" \
  --labels "self-hosted,docker,x64,linux" --unattended --ephemeral
./run.sh
```

```bash
docker build -t infinity-runner .
docker run -e RUNNER_TOKEN=YOUR_TOKEN -e RUNNER_NAME=docker-runner infinity-runner
```

---

## Using the Runner in Workflows

Once registered, target your runner with:

```yaml
jobs:
  my-job:
    runs-on: [self-hosted, local-machine]
    # or: runs-on: [self-hosted, remote-vps]
    # or: runs-on: [self-hosted, docker]
```

---

## Runner Labels Reference

| Label | Purpose |
|-------|---------|
| `self-hosted` | Required â€” marks as self-hosted |
| `local-machine` | Developer's local workstation |
| `remote-vps` | Remote VPS or cloud VM |
| `docker` | Docker container runner |
| `gpu` | Machine with GPU (for AI inference) |
| `x64` | 64-bit Intel/AMD architecture |
| `linux` | Linux OS |

---

## Security Notes

- Runner registration tokens expire after **1 hour** â€” use them immediately.
- Never share runner tokens or commit them to source code.
- Self-hosted runners for public repos run untrusted code â€” use only for **private repos**.
- Apply least-privilege IAM policies on any cloud credentials the runner accesses.

---

*Generated by Runner Manager workflow. TAP Protocol: Policy > Authority > Truth.*
